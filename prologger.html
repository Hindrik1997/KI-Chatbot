<body>
    <style>
    .right {
        text-align: right;
        background-color: #b6e6b0;
    }
    
    p {
        padding: 10px;
        border-radius: 10px;
        color: black;
        background-color: white;
        box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.2);
    }
    
    div#msg {
        overflow-y: auto;
        max-height: calc(100% - 38px);
    }
    
    #smol {
        position: fixed;
        top: 20px;
        background-color: #0e67af;
        color: white;
        width: 300px;
        height: calc(100% - 80px);
        left: calc(50% - 150px);
        padding: 20px;
        border-radius: 10px;
    }
    
    body {
        font-family: arial;
        margin: 0;
        padding: 0;
        height: 100%;
        background-color: black;
    }
    
    #inputter {
        position: absolute;
        bottom: 20px;
        width: calc(100% - 40px);
        border: none;
        border-radius: 10px;
        font-size: 16px;
        padding: 10px;
        box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.2);
    }
    
    #inputter:focus {
        outline: none;
    }
    
    ::-webkit-scrollbar {
        width: 10px;
        height: 0px;
    }
    
    ::-webkit-scrollbar-track {
        background-color: transparent;
        width: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
        background-color: rgba(0, 0, 0, 0.20);
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background-color: rgba(0, 0, 0, 0.3);
    }
    
    ::-webkit-scrollbar-thumb:active {
        background-color: rgba(0, 0, 0, 0.60);
    }
    </style>
    <script>
    document.addEventListener('DOMContentLoaded', init);

    function init() {
        inputter.focus();
        createSocket().then(s => socket = s);
    }

    function createSocket() {
        return new Promise(resolve => {
            let socket = new WebSocket('ws://localhost:3333/ws');
            socket.onmessage = receiveMessage;
            socket.onopen = () => resolve(socket);
        });
    }

    function receiveMessage(message) {
        msg.innerHTML += `
			<p><b>Reply: </b>${message.data}</p>
		`;
        msg.scrollTop = 50000000000000000;
    }

    function sendMessage(e) {
        let text = e.target.value;
        e.target.value = '';
        msg.innerHTML += `
			<p class='right'><b>You: </b>${text}</p>
		`;
        msg.scrollTop = 50000000000000000;
        socket.send(text);
    }
    </script>
    <div id='smol'>
        <div id='msg'></div>
        <input id='inputter' type='text' onchange='sendMessage(event)'>
    </div>
</body>
